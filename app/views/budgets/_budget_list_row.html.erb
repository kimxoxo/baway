						<% product = Product.find(budget_product.product_id) %>

						<tr id='<%= "product_id_#{budget_product.id}" %>'>
							<td class="td_code">
								<%= product.code %>
							</td>

							<td class="td_product_type">
								<b>
									<%= t :"activerecord.attributes.product.product_type#{product.product_type}" %>
								</b>
							</td>

							<td class="td_supplier">
								<%= product.supplier.name %>
							</td>

							<td class="td_description" style="word-wrap:break-word; ">
								<%= product.description %>
							</td>



							<td class="td_pencil_house_area">
								<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'house_area'); " %>'>
									<i class="icon icon-pencil"></i>
								</a>
							</td>



							<td class="td_house_area" style="padding: 0 5px 0 5px; margin:0; ">
		            <%= simple_form_for budget_product,
		            										url: update_product_attributes_budgets_path,
							            					method: :get,
							            					remote: true,
							            					html: {class: 'hide_this_form',
							            					style: 'margin: 0;
							            									padding: 0;
							            									border: 0px solid red; ',
																		id: "form_house_area_#{budget_product.id}"} do |f| %>

		              <%= f.hidden_field :id, value: budget_product.id %>

		              <%= f.input_field :house_area,
		                          			as: :string,
		                       					onblur: '$(this).closest("form").submit(); ',
		                          			style: 'float: left;
		                          							width: 70px;
		                          							margin:0;
		                          							padding:2px;  ' %>          
		            <% end %>

								<% if !budget_product.house_area.blank? %>
									<span>
										<%= budget_product.house_area %>
									</span>
								<% else %>
									<span style="color: red; ">
										<%= t :"activerecord.attributes.product.please_fill" %>
									</span>
								<% end %>

								<i class="icon" style="font-size: 14px; "></i>
							</td>







							<td class="td_pencil_freight">
								<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'freight'); " %>'>
									<i class="icon icon-pencil"></i>
								</a>
							</td>


							<% if budget_product.freight %>
								<% freight_input_value = budget_product.freight %>
							<% else %>
								<% freight_input_value = 0 %>
							<% end %>


							<td class="td_freight" style="padding: 0 5px 0 5px; margin:0; ">
		            <%= simple_form_for budget_product,
		            										url: update_product_attributes_budgets_path,
							            					method: :get,
							            					remote: true,
							            					html: {class: 'hide_this_form',
							            					style: 'margin: 0;
							            									padding: 0;
							            									border: 0px solid red; ',
																		id: "form_freight_#{budget_product.id}"} do |f| %>

		              <%= f.hidden_field :id %>

		              <%= f.input_field :freight,
		                          			as: :string,
		                          			class: 'product_freight_input',
		                       					onblur: '$(this).closest("form").submit(); ',
		                       					value: number_to_currency(freight_input_value).gsub(/[^0-9,.]/, ''),
		                          			style: 'float: left;
		                          							width: 58px;
		                          							margin:0;
		                          							padding:2px;  ' %>          
		            <% end %>


								<% if budget_product.freight %>
									<span>
										<%= number_to_currency(budget_product.freight) %>
									</span>
								<% else %>
									<span style="color: red; ">
										<%= t :"activerecord.attributes.product.please_fill" %>
									</span>
								<% end %>

								<i class="icon" style="font-size: 14px; "></i>
							</td>

















							<td class="td_pencil_days_to_delivery">
								<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'days_to_delivery'); " %>'>
									<i class="icon icon-pencil"></i>
								</a>
							</td>

							<td class="td_days_to_delivery" style="padding: 0 5px 0 5px; margin:0; ">
		            <%= simple_form_for budget_product,
		            										url: update_product_attributes_budgets_path,
							            					method: :get,
							            					remote: true,
							            					html: {class: 'hide_this_form',
							            					style: 'margin: 0;
							            									padding: 0;
							            									border: 0px solid red; ',
																		id: "form_days_to_delivery_#{budget_product.id}"} do |f| %>

		              <%= f.hidden_field :id %>

		              <%= f.input_field :days_to_delivery,
		                          			as: :string,
		                       					onblur: '$(this).closest("form").submit(); ',
		                          			style: 'float: left;
		                          							width: 20px;
		                          							margin:0;
		                          							padding:2px;  ' %>          
		            <% end %>


								<% if budget_product.days_to_delivery %>
									<span>
										<%= "#{budget_product.days_to_delivery} d" %>
									</span>
								<% else %>
									<span style="color: red; ">
										<%= t :"activerecord.attributes.product.please_fill" %>
									</span>
								<% end %>

								<i class="icon" style="font-size: 14px; "></i>
							</td>




							<td class="td_pencil_width">
								<% if product.product_type == 1 %>

								<% else %>
									<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'width'); " %>'>
										<i class="icon icon-pencil"></i>
									</a>
								<% end %>
							</td>




							<td class="td_width">
								<% if product.product_type == 1 %>
									
									<%= "#{product.width} cm" %>
								
								<% else %>

			            <%= simple_form_for budget_product,
			            										url: update_product_attributes_budgets_path,
								            					method: :get,
								            					remote: true,
								            					html: {class: 'hide_this_form',
								            					style: 'margin: 0;
								            									padding: 0;
								            									border: 0px solid red; ',
																			id: "form_width_#{budget_product.id}"} do |f| %>

			              <%= f.hidden_field :id %>

			              <%= f.input_field :width,
			                          			as: :string,
			                          			class: 'product_width_input',
			                       					onblur: '$(this).closest("form").submit(); ',
			                          			style: 'float: left;
			                          							width: 50px;
			                          							margin:0;
			                          							padding:2px;  ' %>          
			            <% end %>


									<% if budget_product.width %>
										<span>
											<%= "#{budget_product.width} cm" %>
										</span>
									<% else %>
										<span style="color: red; ">
											<%= t :"activerecord.attributes.product.please_fill" %>
										</span>
									<% end %>

								<% end %>

								<i class="icon" style="font-size: 14px; "></i>

							</td>



							<td class="td_pencil_height">
								<% if product.product_type == 1 %>

								<% else %>
									<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'height'); " %>'>
										<i class="icon icon-pencil"></i>
									</a>
								<% end %>
							</td>



							<td class="td_height">
								<% if product.product_type == 1 %>
									
									<%# if product.height > 0  %>
										<%#= "#{product.height} cm" %>
									<%# else %>
									n/a	
									<%# end %>
								
								<% else %>

			            <%= simple_form_for budget_product,
			            										url: update_product_attributes_budgets_path,
								            					method: :get,
								            					remote: true,
								            					html: {class: 'hide_this_form',
								            					style: 'margin: 0;
								            									padding: 0;
								            									border: 0px solid red; ',
																			id: "form_height_#{budget_product.id}"} do |f| %>

			              <%= f.hidden_field :id %>

			              <%= f.input_field :height,
			                          			as: :string,
			                          			class: 'product_height_input',
			                       					onblur: '$(this).closest("form").submit(); ',
			                          			style: 'float: left;
			                          							width: 50px;
			                          							margin:0;
			                          							padding:2px;  ' %>          
			            <% end %>


									<% if budget_product.height %>
										<span>
											<%= "#{budget_product.height} cm" %>
										</span>
									<% else %>
										<span style="color: red; ">
											<%= t :"activerecord.attributes.product.please_fill" %>
										</span>
									<% end %>

								<% end %>

								<i class="icon" style="font-size: 14px; "></i>
							</td>


							<td class="td_pencil_quantity">
								<% if product.product_type == 2 %>
								
								<% else %>
									<a href="#" onclick='<%= "enable_this_tr_forms(#{budget_product.id}, 'quantity'); " %>'>
										<i class="icon icon-pencil"></i>
									</a>
								<% end %>
							</td>


							<td class="td_quantity" style="padding: 0 5px 0 5px; margin:0; ">
		            <%= simple_form_for budget_product,
		            										url: update_product_attributes_budgets_path,
							            					method: :get,
							            					remote: true,
							            					html: {class: 'hide_this_form',
							            					style: 'margin: 0;
							            									padding: 0;
							            									border: 0px solid red; ',
																		id: "form_quantity_#{budget_product.id}"} do |f| %>

		              <%= f.hidden_field :id %>

		              <%= f.input_field :quantity,
		                          			as: :string,
		                       					onblur: '$(this).closest("form").submit(); ',
		                          			style: 'float: left;
		                          							width: 30px;
		                          							margin:0;
		                          							padding:2px;  ' %>          
		            <% end %>


								<% if budget_product.quantity %>
									<span>
										<%= budget_product.quantity %>
									</span>
								<% else %>
									<span style="color: red; ">
										<%= t :"activerecord.attributes.product.please_fill" %>
									</span>
								<% end %>
							</td>


							<%= render partial: 'compute_price',
												 locals: {product: product,
											 	   			  budget_product: budget_product} %>


							<td class="td_price">
								<span>
									<% if @price %>
										<%= number_to_currency(@price) %>
									<% else %>
										<span style="color: red; ">
											<%= t :"activerecord.attributes.product.please_fill" %>
										</span>
									<% end %>
								</span>



								<i class="icon" style="font-size: 14px; "></i>
							</td>



							<td class="td_delete">
								<%= link_to content_tag(:i, '', class: "icon-trash", style: "font-size: 14px; "),
	                    			update_products_list_budgets_path(budget_id: @budget.id,
	                    																				product_id: product.id,
	                    																				budget_product_id: budget_product.id,
	                    																				delete: true),
	                    																				remote: true %>
	 						</td>
						</tr>
